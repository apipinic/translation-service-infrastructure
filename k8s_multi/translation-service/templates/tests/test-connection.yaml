apiVersion: v1
kind: Pod
metadata:
  name: "{{ .Release.Name }}-test-connection"
  labels:
    app.kubernetes.io/name: {{ .Chart.Name }}
    helm.sh/chart: {{ .Chart.Name }}-{{ .Chart.Version }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  containers:
    - name: login-service-test
      image: curlimages/curl:latest
      command: ["curl", "-f", "http://{{ include "login-service.fullname" . }}:{{ .Values.loginService.port }}/health"]
    - name: translation-service-test
      image: curlimages/curl:latest
      command: ["curl", "-f", "http://{{ include "translation-service.fullname" . }}:{{ .Values.translationService.port }}/health"]
  restartPolicy: Never